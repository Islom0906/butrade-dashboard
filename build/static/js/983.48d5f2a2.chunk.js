"use strict";(self.webpackChunkbutrade=self.webpackChunkbutrade||[]).push([[983],{84268:(e,t,a)=>{a.d(t,{A:()=>l});a(65043);var s=a(50289),i=a(33307),r=a(70579);const l=e=>{let{label:t,name:a,required:l,required_text:n,warning:u}=e;return(0,r.jsx)(s.A.Item,{label:u?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:u})]}):(0,r.jsx)("div",{children:t}),name:a,rules:[{required:l,message:n}],children:(0,r.jsx)(i.A,{})})}},17100:(e,t,a)=>{a.d(t,{A:()=>l});a(65043);var s=a(50289),i=a(42471),r=a(70579);const l=e=>{let{label:t,name:a,required:l,required_text:n}=e;return(0,r.jsx)(s.A.Item,{label:t,name:a,rules:[{required:l,message:n}],children:(0,r.jsx)(i.A,{rows:4})})}},22983:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(65043),i=a(50289),r=a(48193),l=a(47419),n=a(11645),u=a(22895),d=a(89421),o=a(82907),c=a(59888),m=a(9772),p=a(73216),_=a(14556),v=a(68959),b=a(36213),g=a(84268),h=a(17100),x=a(70579);const A={image:[],title_uz:"",title_ru:"",sub_title_ru:"",sub_title_uz:""},j=()=>{const[e]=i.A.useForm(),t=(0,p.Zp)(),{editId:a}=(0,_.d4)((e=>e.editData)),j=(0,_.wA)(),[f,w]=(0,s.useState)([]),{mutate:y,data:F,isLoading:S,isSuccess:q}=(0,o.useMutation)((e=>{let{url:t,data:a}=e;return c.A.postData(t,a)}),{onSuccess:()=>{r.Ay.success("Success")},onError:e=>{for(let t in e.response.data)r.Ay.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:z,data:I,refetch:E,isSuccess:L}=(0,o.useQuery)(["edit-advantages",a],(()=>c.A.getDataByID("/about/advantages",a)),{enabled:!1}),{mutate:V,isLoading:D,data:k,isSuccess:C}=(0,o.useMutation)((e=>{let{url:t,data:a,id:s}=e;return c.A.editData(t,a,s)}),{onSuccess:()=>{r.Ay.success("Success")},onError:e=>{for(let t in e.response.data)r.Ay.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,s.useEffect)((()=>{C&&j({type:b.aT,payload:""}),(q||C)&&t("/advantage")}),[F,k]),(0,s.useEffect)((()=>{""!==a&&(E(),console.log("render"))}),[a]),(0,s.useEffect)((()=>{""===a&&e.setFieldsValue(A)}),[]),(0,s.useEffect)((()=>{const t=[{uid:null===I||void 0===I?void 0:I.id,name:null===I||void 0===I?void 0:I.id,status:"done",url:null===I||void 0===I?void 0:I.image}];if(console.log(t),L){const a={title_uz:null===I||void 0===I?void 0:I.title_uz,title_ru:null===I||void 0===I?void 0:I.title_ru,sub_title_ru:null===I||void 0===I?void 0:I.sub_title_ru,sub_title_uz:null===I||void 0===I?void 0:I.sub_title_uz,image:t};w(t),e.setFieldsValue(a)}}),[I]);(0,s.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);return(0,x.jsx)("div",{children:S||z||D?(0,x.jsx)(m.HE,{}):(0,x.jsxs)(i.A,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:A,onFinish:e=>{var t;const s=new FormData;var i;(s.append("title_uz",e.title_uz),s.append("title_ru",e.title_ru),s.append("sub_title_ru",e.sub_title_ru),s.append("sub_title_uz",e.sub_title_uz),null!==(t=f[0])&&void 0!==t&&t.originFileObj)&&s.append("image",null===(i=f[0])||void 0===i?void 0:i.originFileObj);L?V({url:"/about/advantages",data:s,id:a}):y({url:"/about/advantages/",data:s})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,x.jsxs)(l.A,{gutter:20,children:[(0,x.jsx)(n.A,{span:24,children:(0,x.jsx)(g.A,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})}),(0,x.jsx)(n.A,{span:24,children:(0,x.jsx)(g.A,{required:!0,required_text:"Sarlavha kiritish kerak",label:"Sarlavha Uz",name:"title_uz"})})]}),(0,x.jsxs)(l.A,{gutter:20,children:[(0,x.jsx)(n.A,{span:24,children:(0,x.jsx)(h.A,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u041f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"sub_title_ru"})}),(0,x.jsx)(n.A,{span:24,children:(0,x.jsx)(h.A,{required:!0,required_text:"Qo'shimcha sarlavha talab qilinadi",label:"Qo'shimcha Sarlavha Uz",name:"sub_title_uz"})})]}),(0,x.jsx)(l.A,{gutter:20,children:(0,x.jsx)(n.A,{span:12,children:(0,x.jsx)(i.A.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],children:(0,x.jsx)(v.A,{children:(0,x.jsx)(u.A,{maxCount:1,fileList:f,listType:"picture-card",onChange:t=>{let{fileList:a}=t;w(a),e.setFieldsValue({image:a})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const a=new FileReader;a.readAsDataURL(e.originFileObj),a.onload=()=>t(a.result)})));const a=new Image;a.src=t;const s=window.open(t);null===s||void 0===s||s.document.write(a.outerHTML)},beforeUpload:()=>!1,children:f.length>0?"":"Upload"})})})})}),(0,x.jsx)(d.A,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:L?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=983.48d5f2a2.chunk.js.map