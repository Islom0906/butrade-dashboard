"use strict";(self.webpackChunkbutrade=self.webpackChunkbutrade||[]).push([[436],{84268:(e,a,s)=>{s.d(a,{A:()=>d});s(65043);var r=s(50289),t=s(33307),n=s(70579);const d=e=>{let{label:a,name:s,required:d,required_text:l,warning:i}=e;return(0,n.jsx)(r.A.Item,{label:i?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:a}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{children:i})]}):(0,n.jsx)("div",{children:a}),name:s,rules:[{required:d,message:l}],children:(0,n.jsx)(t.A,{})})}},39436:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(65043),t=s(50289),n=s(48193),d=s(47419),l=s(11645),i=s(33307),o=s(89421),c=s(82907),u=s(59888),p=s(9772),m=s(73216),h=s(14556),x=s(36213),A=s(84268),g=s(70579);const j=e=>{let{label:a,name:s,required:r,required_text:n}=e;return(0,g.jsx)(t.A.Item,{label:a,name:s,rules:[{required:r,message:n},{validator:(e,a,s)=>{!a||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?s():s("Please enter a valid email address")}}],children:(0,g.jsx)(i.A,{})})},b={address_ru:"",address_uz:"",phone1:"",phone2:"",phone3:"",email:"",map:"",instagram:"",facebook:"",telegram:""},f=()=>{const[e]=t.A.useForm(),a=(0,m.Zp)(),{editId:s}=(0,h.d4)((e=>e.editData)),f=(0,h.wA)(),{mutate:q,data:_,isLoading:y,isSuccess:k}=(0,c.useMutation)((e=>{let{url:a,data:s}=e;return u.A.postData(a,s)}),{onSuccess:()=>{n.Ay.success("Success")},onError:e=>{for(let a in e.response.data)n.Ay.error("".concat(a,": ").concat(e.response.data[a][0]))}}),{isLoading:F,data:I,refetch:S,isSuccess:v}=(0,c.useQuery)(["edit-contact",s],(()=>u.A.getDataByID("/about/contact",s)),{enabled:!1}),{mutate:w,isLoading:E,data:V,isSuccess:z}=(0,c.useMutation)((e=>{let{url:a,data:s,id:r}=e;return u.A.editData(a,s,r)}),{onSuccess:()=>{n.Ay.success("Success")},onError:e=>{for(let a in e.response.data)n.Ay.error("".concat(a,": ").concat(e.response.data[a]))}});(0,r.useEffect)((()=>{z&&f({type:x.aT,payload:""}),(k||z)&&a("/contact")}),[_,V]),(0,r.useEffect)((()=>{""!==s&&S()}),[s]),(0,r.useEffect)((()=>{""===s&&e.setFieldsValue(b)}),[]),(0,r.useEffect)((()=>{if(v){const a={address_uz:I.address_uz,address_ru:I.address_ru,phone1:I.phone1,phone2:I.phone2,phone3:I.phone3,email:I.email,map:I.map,facebook:I.facebook.split("//")[1],instagram:I.instagram.split("//")[1],telegram:I.telegram.split("//")[1]};e.setFieldsValue(a)}}),[I]);return(0,r.useEffect)((()=>{const a=JSON.parse(localStorage.getItem("myFormValues"));a&&(a.images=[],e.setFieldsValue(a));const s=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",s),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",s)}}),[]),(0,g.jsx)("div",{children:y||F||E?(0,g.jsx)(p.HE,{}):(0,g.jsxs)(t.A,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:b,onFinish:e=>{const a=new FormData;a.append("address_ru",e.address_ru),a.append("address_uz",e.address_uz),a.append("phone1",e.phone1),a.append("phone2",e.phone2),a.append("phone3",e.phone3),a.append("email",e.email),a.append("map",e.map),a.append("instagram","https://".concat(e.instagram)),a.append("facebook","https://".concat(e.facebook)),a.append("telegram","https://".concat(e.telegram)),I?w({url:"/about/contact",data:a,id:s}):q({url:"/about/contact/",data:a})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(d.A,{gutter:20,children:[(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(A.A,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0430\u0434\u0440\u0435\u0441",label:"\u0410\u0434\u0440\u0435\u0441 Ru",name:"address_ru"})}),(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(A.A,{required:!0,required_text:"Address kiritish kerak",label:"Address Uz",name:"address_uz"})}),(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(j,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 1",name:"email"})})]}),(0,g.jsxs)(d.A,{gutter:20,children:[(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(A.A,{required:!0,required_text:"\u0412\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 1",name:"phone1"})}),(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(A.A,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 2",name:"phone2"})}),(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(A.A,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 3",name:"phone3"})})]}),(0,g.jsx)(d.A,{gutter:20,children:(0,g.jsx)(l.A,{span:24,children:(0,g.jsx)(A.A,{required:!0,required_text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e",name:"map"})})}),(0,g.jsxs)(d.A,{gutter:20,children:[(0,g.jsx)(l.A,{span:12,children:(0,g.jsx)(t.A.Item,{label:"Facebook",name:"facebook",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Facebook"}],children:(0,g.jsx)(i.A,{addonBefore:"https://"})})}),(0,g.jsx)(l.A,{span:12,children:(0,g.jsx)(t.A.Item,{label:"Instagram",name:"instagram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f Instagram"}],children:(0,g.jsx)(i.A,{addonBefore:"https://"})})})]}),(0,g.jsx)(d.A,{gutter:20,children:(0,g.jsx)(l.A,{span:24,children:(0,g.jsx)(t.A.Item,{label:"Telegram",name:"telegram",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 Telegram"}],children:(0,g.jsx)(i.A,{addonBefore:"https://"})})})}),(0,g.jsx)(o.A,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:v?"Edit":"Add"})]})})}},11645:(e,a,s)=>{s.d(a,{A:()=>r});const r=s(30227).A}}]);
//# sourceMappingURL=436.fde07f8e.chunk.js.map